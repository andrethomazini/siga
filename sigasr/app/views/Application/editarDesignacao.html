 #{extends 'main.html' /} #{set title:'Designação de solicitações' /}

<div class="gt-bd clearfix">
	<div class="gt-content clearfix">
		#{if designacao?.idConfiguracao}
		<h2 class="gt-form-head">Designação</h2>
		#{/if} #{else}
		<h2 class="gt-form-head">Cadastro de Designação</h2>
		#{/else}

		<div class="gt-form gt-content-box">
			#{form @Application.gravarDesignacao()} #{if
			designacao?.idConfiguracao} <input type="hidden"
				name="designacao.idConfiguracao"
				value="${designacao.idConfiguracao}"> #{/if}
			#{ifErrors}
			<p class="gt-error">Alguns campos obrigatórios não foram
				preenchidos ${error}</p>
			#{/ifErrors}	
			<div class="gt-form-row gt-width-66">
				<label>Órgão</label> 
				#{select name:'designacao.orgaoUsuario', items:orgaos, valueProperty:'idOrgaoUsu',
				labelProperty:'nmOrgaoUsu', value:designacao.orgaoUsuario?.idOrgaoUsu}
				#{option 0}Nenhum#{/option} 
				#{/select}
			</div>
			<span style="color: red">#{error
					'designacao.orgaoUsuario' /}</span>
			<div class="gt-form-row gt-width-66">		
				<label>Local</label> 
				#{select name:'designacao.complexo', items:locais, valueProperty:'idComplexo',
				labelProperty:'nomeComplexo', value:designacao.complexo?.idComplexo}
				#{option 0}Nenhum#{/option} 
				#{/select}
			</div>		
			<div class="gt-form-row gt-width-66">
				<label>Lotação</label>#{selecao
					tipo:'lotacao', nome:'designacao.lotacao',
					value:designacao.lotacao?.lotacaoAtual /}
			</div>
			
			<div class="gt-form-row gt-width-66">
				<label>Pessoa</label>#{selecao
					tipo:'pessoa', nome:'designacao.dpPessoa',
					value:designacao.dpPessoa?.pessoaAtual /}
			</div>
			
			<div class="gt-form-row gt-width-66">
				<label>Cargo</label>#{selecao
					tipo:'cargo', nome:'designacao.cargo',
					value:designacao.cargo /}
			</div>
			
			<div class="gt-form-row gt-width-66">
				<label>Função</label>#{selecao
					tipo:'funcao', nome:'designacao.funcaoConfianca',
					value:designacao.funcaoConfianca /}
			</div>

			<div class="gt-form-row gt-width-66">
				<label>Item</label> #{selecao tipo:'item',
					nome:'designacao.itemConfiguracao',
					value:designacao.itemConfiguracao?.atual /}
					<span style="display:inline;color: red">#{error 'designacao.itemConfiguracao' /}</span>
			</div>

			<div class="gt-form-row gt-width-66">
				<label>Ação</label> #{selecao tipo:'acao',
					nome:'designacao.acao', value:designacao.acao?.atual /}
					<span style="display:inline;color: red">#{error 'designacao.acao' /}</span>
			</div>
			<div class="gt-form-row gt-width-66">
				<label>Atendente</label>#{selecao
					tipo:'lotacao', nome:'designacao.atendente', value:designacao.atendente?.lotacaoAtual /}
					<span style="display:inline;color: red">#{error 'designacao.atendente' /}</span>
			</div>
			<div class="gt-form-row gt-width-66">
				<label>Pré-atendente</label>#{selecao
					tipo:'lotacao', nome:'designacao.preAtendente',
					value:designacao.preAtendente?.lotacaoAtual /}
					<span style="display:inline;color: red">#{error 'designacao.preAtendente' /}</span>
			</div>
			<div class="gt-form-row gt-width-66">
				<label>Pós-atendente</label> #{selecao
					tipo:'lotacao', nome:'designacao.posAtendente',
					value:designacao.posAtendente?.lotacaoAtual /}
					<span style="display:inline;color: red">#{error 'designacao.posAtendente' /}</span>
			</div>
			<div class="gt-form-row gt-width-66">
				<label>Equipe de Qualidade</label> #{selecao
					tipo:'lotacao', nome:'designacao.equipeQualidade',
					value:designacao.equipeQualidade?.lotacaoAtual /}
					<span style="display:inline;color: red">#{error 'designacao.equipeQualidade' /}</span>
			</div>
			<div class="gt-form-row gt-width-66">
				<label>Pesquisa de satisfação</label> 
				#{select name:'designacao.pesquisaSatisfacao', items:pesquisaSatisfacao, valueProperty:'idPesquisa',
				labelProperty:'nomePesquisa', value:designacao.pesquisaSatisfacao?.idPesquisa}
				#{option 0}Nenhuma#{/option} 
				#{/select}
			</div>
			<div class="gt-form-row">
				<input type="submit" value="Gravar"
					class="gt-btn-medium gt-btn-left" />
					<a href="@{Application.listarDesignacao}" class="gt-btn-medium gt-btn-left">Cancelar</a>
					#{if designacao?.idConfiguracao} <input type="button" value="Desativar"
					class="gt-btn-medium gt-btn-left"
					onclick="location.href='@{Application.desativarDesignacao()}?id=${designacao.idConfiguracao}'" />
				#{/if}
			</div>
			#{/form}
		</div>
	</div>
</div>

